<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Blockchain exporer for armor network">
    <meta name="og:title" content="Armor (AMX) block explorer">
    <meta name="og:description" content="Blockchain exporer for armor network">
    <meta name="og:image" content="https://explorer.armornetwork.org/images/logo-black.svg">
    <title>Armor (AMX) block explorer</title>
    <link rel="stylesheet" href="../public/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="../public/stylesheets/style.css">
</head>

<body>
    <div class="container mb-4 mt-4">
        <div class="row mb-3">
            <div class="col">
				<a href="javascript:void(0)" onclick="window.location.replace(window.location.pathname);">
					<img class="logo" src="../public/images/logo-black.svg" />
					<h1>Armor block explorer</h1>
                </a>
			</div>
        </div>
        <form id="search">
            <div class="row">
                <div class="col"><input class="form-control" id="hash" type="text" name="hash" placeholder="Insert block or transaction hash, or positive block-number (height) or negative depth-number." /></div>
                <div class="col-auto"><button class="btn btn-primary" type="submit">Search</button></div>
            </div>
        </form>
    </div>
    <div class="container">
        <div class="row"></div>
    </div>
</body>

<script src="RPC.js"></script>
<script src="ShowResults.js"></script>
<script src="get_status.js"></script>
<script src="searchBlockOrTx.js"></script>
<script src="timestamp.js"></script>

<script>
	if(window.location.hash.split("search?q=").length > 1){
		Search();
	}else{
		GetStatus();
	}
    var form = document.getElementById('search');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        var hash = document.getElementById('hash');
        hash.value && (window.location.href = (window.location.pathname)+'#search?q=' + hash.value);
		Search();
    });
	
	
if ("onhashchange" in window) {
	function locationHashChanged() {
		if (location.hash === "") {
			GetStatus();
		}
		else if(location.hash.indexOf('#search?q=') !== -1){
			document.getElementById('hash').value = location.hash.split('#search?q=')[1];
			Search();
		}
	}
	window.onhashchange = locationHashChanged;	
}
	
</script>




<script>
//	send_xhr('{"jsonrpc": "2.0", "id": "0","method": "get_block_header","params": {"height_or_depth": 1}}', 'http://192.168.8.109:58081/json_rpc', 'POST');

/*
var express = require('express');
var router = express.Router();
const rpc = require('../RPC');
const { timeDifference } = require('../helpers');

/*
// GET home page.
router.get('/', async function (req, res, next) {
    let status = {};
    try {
        status = await rpc('get_status');
        if (status && status.result && status.result.top_block_timestamp) {
            status.result.top_block_timestamp = status.result.top_block_timestamp.toString() + ' - ' + timeDifference(status.result.top_block_timestamp);
        }
        if (status && status.result && status.result.top_block_timestamp_median) {
            status.result.top_block_timestamp_median = status.result.top_block_timestamp_median.toString() + ' - ' + timeDifference(status.result.top_block_timestamp_median);
        }
    } catch (err) {
        console.log(err);
    }
    return res.render('index', {
        status
    });
});

module.exports = router;
*/

//send_xhr('{"jsonrpc": "2.0", "id": "0","method": "get_status"}', 'http://192.168.8.109:58081/json_rpc', 'POST');


/*
function getCategoryList() {
  var xhr = new XMLHttpRequest();

  return new Promise((resolve, reject) => {

    xhr.onreadystatechange = (e) => {
      if (xhr.readyState !== 4) {
        return;
      }

      if (xhr.status === 200) {
        console.log('SUCCESS', xhr.responseText);
        resolve(JSON.parse(xhr.responseText));
      } else {
        console.warn('request_error');
      }
    };

    xhr.open('GET', 'https://httpbin.org/user-agent');
    xhr.send();
  });
}

getCategoryList().then(res => console.log("The result is", res));

*/


</script>

















</html>